{"version":3,"sources":["contentscripts.coffee"],"names":[],"mappings":"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","file":"contentscripts.js","sourceRoot":"/source/","sourcesContent":["r = chrome.runtime\nstripUnit = (str) -> Number str.match(/-?\\d+/)[0]\ncreateElem = (elem, id, parent) ->\n  elem = document.createElement elem\n  elem.id = id\n  parent.appendChild elem\n  elem\n\nr.onMessage.addListener (req) ->\n  if req.emit is 'jogi:has'\n    elem = document.getElementById 'chrome-extension-jogi'\n    r.sendMessage {hasElem: elem?}, ->\n\n  else if req.emit is 'jogi:create'\n    wrapper = createElem 'div', 'chrome-extension-jogi', document.body\n    jogi = createElem 'div', 'jogi', wrapper\n    cover = createElem 'div', 'jogi-cover', wrapper\n    flags =\n      move: false\n      rotate: false\n    promise = null\n    sumDeg = 0\n\n    startEvent = (e) ->\n      e.preventDefault()\n      e.stopPropagation()\n      cover.style.display = 'block'\n      if e.shiftKey then flags.rotate = true\n      else flags.move = true\n    endEvent = (e) ->\n      e.preventDefault()\n      e.stopPropagation()\n      cover.style.display = 'none'\n      flags.move = false\n      flags.rotate = false\n\n    move = (e) ->\n      do (s = jogi.style) ->\n        s.left = \"#{stripUnit(s.left) + e.movementX}px\"\n        s.top = \"#{stripUnit(s.top) + e.movementY}px\"\n    rotate = (e) ->\n      do (s = jogi.style) ->\n        if e.altKey\n          sumDeg += e.movementY\n          if sumDeg < -45 or sumDeg > 45\n            adjustmentDeg = do ->\n              deg = Math.abs 45 * ~~(stripUnit(s.transform) / sumDeg)\n              deg = if sumDeg < 0 then deg + 90 else deg\n              if deg is 0 then 1800 else deg\n            s.transform = \"rotate(#{adjustmentDeg}deg)\"\n            sumDeg = 0\n        else\n          s.transform = \"rotate(#{stripUnit(s.transform) + e.movementY}deg)\"\n\n    jogi.style.left = '0px'\n    jogi.style.top = '0px'\n    jogi.style.transform = 'rotate(1800deg)'\n\n    jogi.addEventListener 'mousedown', startEvent\n    cover.addEventListener 'mouseup', endEvent\n    cover.addEventListener 'mousemove', (e) ->\n      e.preventDefault()\n      e.stopPropagation()\n      if flags.move is true then move e\n      else if flags.rotate is true then rotate e\n\n  else if req.emit is 'jogi:remove'\n    elem = document.getElementById 'chrome-extension-jogi'\n    document.body.removeChild elem if elem?\n"]}